**maxmemory和maxmemory_policy参数**



在redis.conf中通过这两个参数配置redis的内存使用情况。

Redis的可用内存与系统的内存有关，一般我们需要设置它的最大可用内存，除非你确定你的业务中redis的内存不会很大且有足够的系统内存

maxmemory
------

### 该参数的作用是:


* 1.指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，

* 2.当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作

* 3. 该参数能很好的保护好你的 Redis 不会因为使用了过多的物理内存而导致 swap，最终严重影响性能甚至崩溃

### 如何设置

* 1. 如果不设置或设置为0，64位系统不限制使用，32位最多使用3G。但是如果一旦开始写入swap虚拟内存则后期查询速度反而会慢。
* 2. 如果开启了RDB持久化方式，因为子进程在复制所有数据时内存使用量会增加一倍，所以最大设置为系统内存的45%
* 3. 最大内存最好不要超过空闲内存的3/5

```
maxmemory 2gb //最大内存最好不要超过空闲内存的3/5，超过32GB会自动进入64位世界，指针长度*2，20%的空间会被指针消耗，性能略有影响
```

maxmemory-policy
------

### 该参数的作用是:

指定快要达到maxmemory时的删除策略,如果不设置，则当内存不足时再添加数据就会报错

### 删除策略介绍

总共有六种策略


